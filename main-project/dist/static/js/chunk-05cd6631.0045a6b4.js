(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05cd6631"],{"56c6":function(t,e,s){},"66e3":function(t,e,s){"use strict";s("cd03")},"75c9":function(t,e,s){"use strict";s("56c6")},cb48:function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("el-container",{staticClass:"page-login"},[s("el-aside",{staticClass:"left-bg",attrs:{width:"auto"}}),s("el-main",{staticClass:"main-box"},[s("div",{staticClass:"login-form"},[s("div",{staticClass:"logo-box"},[s("div",{staticClass:"title"},[t._v(t._s(t.$store.state.projectName))])]),s("el-tabs",{staticClass:"tabs-box",on:{"tab-click":t.handleTabsClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[s("el-tab-pane",{attrs:{label:"快捷登录",name:"login-fast"}},[s("el-form",{ref:"refFastForm",staticClass:"form-core",attrs:{model:t.fastInfo}},[s("el-form-item",{attrs:{prop:"account",rules:t.inputRules}},[s("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入正确的手机号"},model:{value:t.fastInfo.account,callback:function(e){t.$set(t.fastInfo,"account","string"===typeof e?e.trim():e)},expression:"fastInfo.account"}},[s("template",{slot:"prepend"},[t._v("+86")])],2)],1),s("el-form-item",{attrs:{prop:"smsCode",rules:t.inputRules}},[s("el-input",{staticClass:"input-box sms-code",class:{disabled:t.sendDisabled},attrs:{placeholder:"请验证码"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitFastLoginClick.apply(null,arguments)}},model:{value:t.fastInfo.smsCode,callback:function(e){t.$set(t.fastInfo,"smsCode","string"===typeof e?e.trim():e)},expression:"fastInfo.smsCode"}},[s("template",{slot:"append"},[s("el-button",{attrs:{type:"primary",londing:t.reqLoading,disabled:t.sendDisabled},on:{click:t.sendSmsCodeClick}},[t._v(" "+t._s(t.sendBtnText))])],1)],2)],1),s("el-button",{staticClass:"login-submit-btn",attrs:{type:"primary"},on:{click:t.submitFastLoginClick}},[t._v("登录")])],1)],1),s("el-tab-pane",{attrs:{label:"密码登录",name:"login-password"}},[s("el-form",{ref:"refPasswordForm",staticClass:"form-core",attrs:{model:t.userInfo}},[s("el-form-item",{attrs:{prop:"account",rules:t.inputRules}},[s("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入手机号 / 邮箱"},model:{value:t.userInfo.account,callback:function(e){t.$set(t.userInfo,"account","string"===typeof e?e.trim():e)},expression:"userInfo.account"}})],1),s("el-form-item",{attrs:{prop:"password",rules:t.inputRules}},[s("el-input",{staticClass:"input-box",attrs:{placeholder:"请输入密码",type:"password"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.submitPasswordLoginClick.apply(null,arguments)}},model:{value:t.userInfo.password,callback:function(e){t.$set(t.userInfo,"password",e)},expression:"userInfo.password"}})],1),s("el-button",{staticClass:"login-submit-btn",attrs:{type:"primary",londing:t.reqLoading},on:{click:t.submitPasswordLoginClick}},[t._v("登录")])],1)],1)],1)],1)])],1)},i=[],o=(s("b0c0"),s("4795"),s("14d9"),s("365c")),a={data:function(){return{activeName:"login-fast",smsType:"CODE_LOGIN",loginType:"PC",loginClientType:"PC",bizType:"SCP_OSS",reqLoading:!1,fastInfo:{account:"",smsCode:""},inputRules:[{required:!0,message:"请输入",trigger:"change"}],userInfo:{account:"",password:""},deviceInfo:"",smsTimeCount:0,smsTimeMaxCount:60,countTimer:null}},computed:{sendDisabled:function(){return this.smsTimeCount>0},sendBtnText:function(){return this.smsTimeCount<=0?"发送验证码":"发送验证码(".concat(this.smsTimeCount,")")}},created:function(){this.deviceInfo=navigator&&navigator.userAgent,this.$store.dispatch("user/clearUserData")},methods:{handleTabsClick:function(t){"login-fast"===t.name&&(this.fastInfo.account="",this.fastInfo.smsCode=""),"login-password"===t.name&&(this.userInfo.account="",this.userInfo.password="")},submitFastLoginClick:function(){var t=this,e=this.fastInfo;this.$refs.refFastForm.validate((function(s){if(s){var n={};n.mobile=e.account,n.smsCode=e.smsCode,n.loginClientType=t.loginClientType,n.bizType=t.bizType,n.deviceInfo=t.deviceInfo,n.userTag="EMP",t.$store.dispatch("user/smsLogin",n).then((function(){t.redirectPath()}))}}))},submitPasswordLoginClick:function(){var t=this,e=this.userInfo;this.$refs.refPasswordForm.validate((function(s){if(s){var n={};n.account=e.account,n.password=e.password,n.loginClientType=t.loginClientType,n.bizType=t.bizType,n.deviceInfo=t.deviceInfo,n.userTag="EMP",t.$store.dispatch("user/loginUsePwd",n).then((function(){t.redirectPath()}))}}))},sendSmsCodeClick:function(){var t=this,e=this.fastInfo.account;if(e&&11===e.length){var s={};s.type=this.smsType,s.mobile=e,o["a"].basic.sendSmsCode(s).then((function(e){e.success&&(t.$message.success("验证码已发送"),t.startTimeCount())}))}else this.$alert("请输入正确的手机号")},startTimeCount:function(){var t=this;this.smsTimeCount=this.smsTimeMaxCount,this.countTimer=setInterval((function(){t.smsTimeCount<=0&&(clearInterval(t.countTimer),t.countTimer=null),t.smsTimeCount--}),1e3)},redirectPath:function(){this.$router.push({path:this.redirect||"/"})}},beforeDestroy:function(){this.countTimer&&(clearInterval(this.countTimer),this.countTimer=null)}},r=a,c=(s("75c9"),s("66e3"),s("2877")),l=Object(c["a"])(r,n,i,!1,null,"714e9d8c",null);e["default"]=l.exports},cd03:function(t,e,s){t.exports={menuText:"#bfcbd9",menuActiveText:"#409eff",subMenuActiveText:"#f4f4f5",menuBg:"#304156",menuHover:"#263445",subMenuBg:"#1f2d3d",subMenuHover:"#001528",sideBarWidth:"210px"}}}]);